# Plugin_from_5_to_2

このスクリプトは、特定の schema.go ファイルを編集し、必要に応じて Node.js のバージョンを変更してから、特定のプラグインの更新を行うために使用されます。

## 機能
Plugin_FROM_5_TO_2.shは、以下の機能を持ちます。

1. 現在のNode.jsのバージョンを確認Node.js のバージョンを確認します。
2. デフォルトである Node.js バージョンが v15.14.0 ではない場合、nvm を使用してバージョンを v15.14.0 に変更します。
3. スクリプトで使用する schema.go ファイルを編集します。編集する項目は、DefaultMaxHTTPAttempts の値を 2 に変更することです。
4. pm2を使用してプロセスを停止します。
5. プロファイルを読み込みます。
6. プラグインを再インストールします。
7. pm2 でプラグインプロセスを再起動し、リスト表示します
8. スクリプトの処理が完了したら、メッセージを表示します。

## 要件
* このスクリプトを使用する前に、以下の要件を満たす必要があります。
* nvm を使用して Node.js のバージョンを切り替えることができるようになっていること。
* pm2 がインストールされており、プラグインを管理するために必要なスクリプトが実行できること。
* スクリプトで使用する schema.go ファイルのパスが正しいこと。

## 注意事項
* このスクリプトを使用する前に、バックアップを作成することをお勧めします。
* プラグインの名前は、2_nodeStartPM2 または [sS]tart[nN]ode である必要があります。これらのプロセス名が見つからない場合、スクリプトはエラーで終了します。
* `./Plugin_FROM_5_TO_2.sh` だけで実行すると、でシェルスクリプトのプロセス内だけで有効で、シェルスクリプトが終了すると変更は破棄されます。そのため、シェルスクリプトで`NODE_VERSION`を変更した後、シェルスクリプトを、source コマンドで読み込んで、実行する必要でがあります。そのために`source ./Plugin_FROM_5_TO_2.sh`を実行してください。このスクリプトを実行すると、Node.jsのバージョンがPluginNodeのデフォルトであるv15.14.0になります。もし異なるバージョンを使用したい場合は、以下のスクリプトを実行して変更してください。
```
nvm use <version>
```

## 実行コマンド
以下のコマンドを使用して、このスクリプトを実行することができます。

1. 以下の手順で、git clone して source コマンドを実行できるようにします。
2. ターミナルを開いて、任意のディレクトリに移動します。
```
git clone https://github.com/11ppm/Plugin_from_5_to_2.git
```
3. 以下のコマンドを実行して、リポジトリをクローンします。
```
cd Plugin_from_5_to_2
```
4. Plugin_FROM_5_TO_2.sh ファイルに実行権限を付与します。
```
chmod +x Plugin_FROM_5_TO_2.sh
```
5. source コマンドを使用して、シェルスクリプトを実行します。
```
source ./Plugin_FROM_5_TO_2.sh
```
※ ./は必ずつけてください。

